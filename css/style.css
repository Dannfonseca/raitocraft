/* frontend/css/style.css - v3 Dark Theme */

/*-------------------------*\
  #VARIÁVEIS GLOBAIS (Dark Theme)
\*-------------------------*/
:root {
    /* Paleta Principal - Tons escuros e acentos vibrantes */
    --color-background: #1e2a38; /* Azul/Cinza escuro para o fundo geral */
    --color-surface: #2c3e50;    /* Superfície principal (cards, modal, page-view) */
    --color-surface-light: #34495e; /* Superfície um pouco mais clara (hover, inputs) */
    --color-border: #4a6572;     /* Borda sutil entre elementos escuros */
    --color-text-primary: #ecf0f1; /* Texto principal (quase branco) */
    --color-text-secondary: #bdc3c7; /* Texto secundário (cinza claro) */
    --color-text-muted: #95a5a6;    /* Texto menos importante (cinza) */

    /* Cores de Acento */
    --color-primary: #1abc9c;     /* Teal vibrante (primário) */
    --color-primary-dark: #16a085; /* Teal mais escuro (hover) */
    --color-secondary: #e67e22;   /* Laranja (secundário) */
    --color-secondary-dark: #d35400; /* Laranja mais escuro (hover) */
    --color-danger: #e74c3c;      /* Vermelho (perigo) */
    --color-danger-dark: #c0392b; /* Vermelho mais escuro (hover) */
    --color-success: #2ecc71;     /* Verde (sucesso) */
    --color-success-dark: #27ae60; /* Verde mais escuro (hover) */
    --color-warning: #f1c40f;     /* Amarelo (aviso) */
    --color-info: #3498db;       /* Azul (info) */

    /* Fontes e Espaçamento */
    --font-family: 'Roboto', sans-serif;
    --border-radius: 4px;
    --box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    --box-shadow-hover: 0 4px 10px rgba(0, 0, 0, 0.3);
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;

    /* Transições */
    --transition-speed: 0.2s;
    --transition-ease: ease-in-out;
}

/*-------------------------*\
  #RESET E ESTILOS BASE
\*-------------------------*/
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-family);
    line-height: 1.7; /* Ligeiramente mais espaçado */
    background-color: var(--color-background);
    color: var(--color-text-primary);
    padding-bottom: 60px; /* Espaço footer */
}

/*-------------------------*\
  #HEADER E NAVEGAÇÃO
\*-------------------------*/
.main-header {
    background-color: var(--color-surface); /* Header com cor de superfície */
    color: var(--color-primary); /* Título com cor primária */
    padding: var(--spacing-md) 0;
    box-shadow: var(--box-shadow);
    border-bottom: 2px solid var(--color-primary); /* Linha com cor primária */
}

.main-header h1 {
    text-align: center;
    margin-bottom: var(--spacing-sm);
    font-size: 1.8rem;
    font-weight: 700;
    letter-spacing: 1px; /* Espaçamento leve */
}

nav#main-nav {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: var(--spacing-md); /* Mais espaço entre botões */
    padding: 0 var(--spacing-md);
}

nav#main-nav button {
    background-color: transparent; /* Fundo transparente */
    border: 1px solid var(--color-primary); /* Borda na cor primária */
    padding: var(--spacing-sm) var(--spacing-lg);
    margin: 0;
    border-radius: var(--border-radius);
    color: var(--color-primary); /* Texto na cor primária */
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    text-transform: uppercase; /* Caixa alta */
    letter-spacing: 0.5px;
    transition: background-color var(--transition-speed) var(--transition-ease),
                color var(--transition-speed) var(--transition-ease),
                transform var(--transition-speed) var(--transition-ease);
}

nav#main-nav button:hover,
nav#main-nav button.active {
    background-color: var(--color-primary); /* Hover/Active preenche com cor primária */
    color: var(--color-surface); /* Texto fica com cor de superfície */
    transform: scale(1.05); /* Leve aumento */
}

/*-------------------------*\
  #LAYOUT PRINCIPAL E VIEWS
\*-------------------------*/
.container {
    max-width: 1140px;
    margin: var(--spacing-lg) auto;
    padding: 0 var(--spacing-md);
}

.page-view {
    background-color: var(--color-surface);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    margin-bottom: var(--spacing-lg);
    border-left: 4px solid var(--color-primary); /* Detalhe lateral */
}

.page-title {
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
    font-size: 1.6rem;
    font-weight: 700;
}
.page-description {
    color: var(--color-text-secondary);
    margin-bottom: var(--spacing-md);
    font-size: 1rem;
}
.sub-title {
    color: var(--color-text-primary);
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-md);
    font-size: 1.3rem;
    font-weight: 500;
}
.sub-title-small {
    color: var(--color-text-secondary);
    margin-top: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
    font-size: 1rem;
    font-weight: 500;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--spacing-xs);
}

/*-------------------------*\
  #FORMULÁRIOS (Dark Theme)
\*-------------------------*/
.form-group { margin-bottom: var(--spacing-md); }
.form-group label {
    display: block;
    margin-bottom: var(--spacing-sm);
    font-weight: 500;
    color: var(--color-text-secondary); /* Label mais clara */
    font-size: 0.9rem;
}
.form-group input[type="text"],
.form-group input[type="number"],
.form-group select {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    font-size: 1rem;
    background-color: var(--color-surface-light); /* Fundo do input mais claro que a superfície */
    color: var(--color-text-primary); /* Texto claro */
    transition: border-color var(--transition-speed) var(--transition-ease),
                box-shadow var(--transition-speed) var(--transition-ease);
}
/* Remove setas de input number (opcional) */
.form-group input[type="number"]::-webkit-outer-spin-button,
.form-group input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.form-group input:focus,
.form-group select:focus {
    border-color: var(--color-primary); /* Foco com cor primária */
    background-color: var(--color-surface); /* Fundo volta pra cor da superfície */
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(26, 188, 156, 0.25); /* Sombra de foco com cor primária */
}
.form-group select {
    appearance: none; /* Estilo customizado para select */
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23bdc3c7%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right var(--spacing-md) center;
    background-size: 0.65em auto;
    padding-right: var(--spacing-xl); /* Espaço para a seta */
}

.form-actions { display: flex; gap: var(--spacing-md); margin-top: var(--spacing-lg); flex-wrap: wrap; }
.form-actions .button { flex-grow: 1; } /* Botões ocupam espaço igual */

hr { margin: var(--spacing-lg) 0; border-color: var(--color-border); }

/*-------------------------*\
  #BOTÕES GERAIS (Dark Theme)
\*-------------------------*/
.button {
    cursor: pointer;
    font-size: 1rem;
    font-weight: 500;
    border-radius: var(--border-radius);
    padding: 0.6rem 1.2rem;
    border: none;
    transition: background-color var(--transition-speed) var(--transition-ease),
                transform var(--transition-speed) var(--transition-ease),
                box-shadow var(--transition-speed) var(--transition-ease);
    display: inline-block;
    text-align: center;
    text-decoration: none;
    line-height: 1.5;
    box-shadow: var(--box-shadow);
}
.button:hover {
    transform: translateY(-2px);
    box-shadow: var(--box-shadow-hover);
}
.button:active {
    transform: translateY(-1px);
}
.button:focus { outline: none; box-shadow: 0 0 0 0.2rem rgba(26, 188, 156, 0.4); }

.button-primary { background-color: var(--color-primary); color: #fff; } /* Texto branco para melhor contraste */
.button-primary:hover { background-color: var(--color-primary-dark); }

.button-secondary { background-color: var(--color-secondary); color: #fff; }
.button-secondary:hover { background-color: var(--color-secondary-dark); }

.button-danger { background-color: var(--color-danger); color: #fff; }
.button-danger:hover { background-color: var(--color-danger-dark); }

/*-------------------------*\
  #CONTAINER E CARDS DE ITENS
\*-------------------------*/
.loading-text { color: var(--color-text-muted); font-style: italic; }

.item-card-container {
    display: grid;
    grid-template-columns: 1fr; /* Mobile: 1 coluna */
    gap: var(--spacing-lg); /* Espaço maior entre cards */
    margin-top: var(--spacing-md);
}

.item-card {
    background-color: var(--color-surface); /* Mesmo fundo das views */
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    padding: var(--spacing-md);
    box-shadow: var(--box-shadow);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: transform var(--transition-speed) var(--transition-ease),
                box-shadow var(--transition-speed) var(--transition-ease);
    position: relative; /* Para pseudo-elementos se necessário */
    overflow: hidden; /* Para detalhes de design */
}
.item-card::before { /* Detalhe de cor sutil */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 5px;
    height: 100%;
    background-color: var(--color-primary);
    opacity: 0.7;
    transition: opacity var(--transition-speed) var(--transition-ease);
}
.item-card:hover::before {
    opacity: 1;
}
.item-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--box-shadow-hover);
}

.item-card-info { padding-left: var(--spacing-md); /* Espaço após a barra lateral */ }
.item-card-name {
    font-size: 1.2rem;
    font-weight: 500;
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-xs);
}
.item-card-details {
    font-size: 0.9rem;
    color: var(--color-text-secondary);
}
.item-card-actions {
    display: flex;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-md);
    padding-left: var(--spacing-md); /* Alinha com info */
}
.item-card-actions .button {
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: 0.85rem;
}

/*-------------------------*\
  #GRID DE MATERIAIS E BOTÃO REMOVER (Dark Theme)
\*-------------------------*/
.materials-container-grid { display: grid; gap: var(--spacing-md); }
.material-entry {
    display: grid;
    grid-template-columns: 1fr; /* Mobile: tudo empilhado */
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    background-color: var(--color-surface-light); /* Fundo mais claro */
    align-items: end;
}
.material-entry label { font-size: 0.85rem; color: var(--color-text-secondary); }
.material-entry input, .material-entry select { padding: var(--spacing-sm); font-size: 0.95rem; }

/* Correção do Botão Remover */
.material-entry .button-danger {
    padding: var(--spacing-sm) var(--spacing-md); /* Padding consistente */
    font-size: 0.85rem; /* Tamanho da fonte consistente */
    width: fit-content; /* Largura baseada no conteúdo */
    justify-self: end; /* Alinha à direita na célula da grid */
    margin-top: var(--spacing-sm); /* Adiciona espaço acima no mobile */
    /* Remove height: fit-content se estava causando problemas */
}

/*-------------------------*\
  #MODAL (Dark Theme)
\*-------------------------*/
.modal { background-color: rgba(0, 0, 0, 0.75); } /* Fundo mais escuro */
.modal-content {
    background-color: var(--color-surface); /* Fundo escuro */
    border: 1px solid var(--color-border);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
}
.close-button { color: var(--color-text-muted); }
.close-button:hover, .close-button:focus { color: var(--color-text-primary); }
.modal-title { color: var(--color-primary); } /* Título do modal com cor primária */
.modal-content .sub-title-small { color: var(--color-text-secondary); border-color: var(--color-border); }
ul.modal-materials { border-color: var(--color-border); max-height: 200px; /* Um pouco mais de altura */ }
ul.modal-materials li { border-color: var(--color-border); }
ul.modal-materials input[type="number"] {
    background-color: var(--color-background); /* Fundo ainda mais escuro para input dentro do modal */
    border-color: var(--color-border);
    color: var(--color-text-primary);
}
.modal-confirm-btn { margin-top: var(--spacing-lg); width: 100%; font-size: 1.1rem; } /* Botão maior */
.modal-results-area { background-color: var(--color-surface-light); border-radius: var(--border-radius); }
.modal-results-area h4 { color: var(--color-text-secondary); }
.modal-results-area p { margin-bottom: var(--spacing-sm); font-size: 1rem; } /* Texto resultado maior */
.modal-results-area strong { color: var(--color-text-primary); }
.profit-percentage { color: var(--color-primary); } /* Porcentagem com cor primária */
.info-text-inline { color: var(--color-text-muted); }

/*-------------------------*\
  #MENSAGENS DE STATUS (Dark Theme)
\*-------------------------*/
.status-message { margin-top: var(--spacing-md); padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--border-radius); font-size: 0.9rem; display: none; border: 1px solid transparent; }
.status-success { background-color: rgba(46, 204, 113, 0.2); color: var(--color-success); border-color: var(--color-success); display: block; }
.status-error { background-color: rgba(231, 76, 60, 0.2); color: var(--color-danger); border-color: var(--color-danger); display: block; }
.status-loading { background-color: rgba(52, 73, 94, 0.5); color: var(--color-text-secondary); border-color: var(--color-surface-light); display: block; }
.status-info { background-color: rgba(52, 152, 219, 0.2); color: var(--color-info); border-color: var(--color-info); display: block; }

/*-------------------------*\
  #FOOTER (Dark Theme)
\*-------------------------*/
.main-footer { background-color: var(--color-dark-color); /* Usa cor mais escura ainda */ color: var(--color-text-muted); padding: var(--spacing-sm) 0; position: fixed; bottom: 0; left: 0; width: 100%; font-size: 0.8rem; z-index: 10; border-top: 1px solid var(--color-border); }

/*-------------------------*\
  #RESPONSIVIDADE (Ajustes para Dark Theme e Cards)
\*-------------------------*/

/* Telas Médias (Tablets >= 600px) */
@media (min-width: 600px) {
    .container { padding: 0 var(--spacing-lg); }
    .item-card-container { grid-template-columns: repeat(2, 1fr); } /* 2 colunas */
    .material-entry {
        grid-template-columns: 2fr 1fr 1.5fr auto; /* Nome, Qtd, Tipo, Botao (Preço NPC pode ficar abaixo se necessário) */
        .material-entry > div:nth-child(1) { grid-column: 1 / -1; } /* Nome full */
        .material-entry > div:nth-child(2) { grid-column: 1 / span 1; } /* Qtd */
        .material-entry > div:nth-child(3) { grid-column: 2 / span 1; } /* Tipo */
        .material-entry > div:nth-child(4) { grid-column: 1 / span 2; } /* Preco NPC */
        .material-entry > div:nth-child(5) { grid-column: 3 / span 1; justify-self: end; align-self: center; margin-top: 0;} /* Botao */
    }
    .form-actions .button { flex-grow: 0; width: auto; } /* Botões do form não esticam */
}

/* Telas Grandes (Desktops >= 992px) */
@media (min-width: 992px) {
    .main-header h1 { font-size: 2rem; }
    nav#main-nav button { font-size: 1rem; }
    .page-title { font-size: 1.8rem; }
    .item-card-container { grid-template-columns: repeat(3, 1fr); } /* 3 colunas */
    .material-entry {
         grid-template-columns: 3fr 1fr 1.5fr 1.5fr auto; /* Nome, Qtd, Tipo, Preco, Botao */
         .material-entry > div { grid-column: auto / auto; } /* Reseta spans */
         .material-entry > div:nth-child(5) { justify-self: end; align-self: end; } /* Botão no fim */
    }
}